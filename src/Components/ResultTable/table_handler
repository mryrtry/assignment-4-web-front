function formatRequestTime(requestTime) {
    if (typeof requestTime !== 'string' || !requestTime.includes('T')) {
        throw new Error('Invalid ISO date string');
    }

    const serverDate = new Date(requestTime);
    const options = {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        timeZoneName: 'short',
    };

    return serverDate.toLocaleString(navigator.language, options);
}

function formatNanosecondsToMilliseconds(nanoseconds) {
    if (typeof nanoseconds !== 'number' || isNaN(nanoseconds)) {
        throw new Error('Invalid input. Please provide a valid number of nanoseconds.');
    }

    const milliseconds = nanoseconds / 1_000_000;
    return `${milliseconds.toFixed(3)} ms`;
}

export function prepareTableData(points) {
    return points.map((point) => ({
        ...point,
        formattedTime: formatRequestTime(point.createAt),
        formattedProcessingTime: formatNanosecondsToMilliseconds(point.processingTime),
        areaStatus: point.inArea ? "In area" : "Not in area",
    }));
}